@using GoNewWebsite.Helpers
@using Web;
@model Entities.Website.WebsitePage

@{
    var culture = System.Threading.Thread.CurrentThread.CurrentUICulture.Name.ToLowerInvariant();
}

@helper selected(string c, string culture)
{
    if (c == culture)
    {
        @:checked="checked"
    }
}
<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ff0000">
    <meta name="og:type" content="website">
    <meta name="og:url" content="http://onepager.gim.co.il">
    <meta name="og:image:secure_url" content="http://onepager.gim.co.il/Img/fabi.png">
    <meta property="og:title" content="GO Digital Marketing" />
    <meta property="og:description" name="description" content="Digital Marketing. Business Results." />
    <meta property="og:site_name" content="GO Digital Marketing" />
    <meta property='og:title' content='GO Digital Marketing' />
    <meta property='og:image' content='http://onepager.gim.co.il/Img/1200x627.png' />
    <meta property='og:description' content='Digital Marketing. Business Results.' />
    <meta property='og:url' content='http://onepager.gim.co.il' />

    <meta name="twitter:title" content="GO Digital Marketing">
    <meta name="twitter:description" content="Digital Marketing. Business Results." />

    <title> GO Digital Marketing</title>
    <link rel="icon" type="image/png" href="/Images/fabi.png" />

    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")

    <link href="https://pro.fontawesome.com/releases/v5.1.0/css/all.css" rel="stylesheet">
    @*<link href="~/Content/fonts/css/fontawesome.min.css" rel="stylesheet" />*@

    <!--[if IE]>
        <link rel="shortcut icon" href="~/Img/fabi.png" type="image/vnd.microsoft.icon" />
    <![endif]-->
    <!-- Plugin CSS -->
    @*    <link rel="stylesheet" href="https://cdn.rtlcss.com/bootstrap/v4.2.1/css/bootstrap.min.css" integrity="sha384-vus3nQHTD+5mpDiZ4rkEPlnkcyTP+49BhJ4wJeJunw06ZAp+wzzeBPUXr42fi8If" crossorigin="anonymous">*@


    @*<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />*@

    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <script src="~/Scripts/Logo/logo_HTML5Canvas.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.3.1/css/swiper.css" />
    <link href="~/plugin/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet" />


</head>
<body id="page-top" onload="init();" style="margin: 0px;">
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
        <div class="container-fluid">
            <div class="square">
                <div id="animation_container">
                    <canvas id="canvas"></canvas>
                    <div id="dom_overlay_container">
                    </div>
                </div>


            </div>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav text-uppercase ml-auto">
                    <li class="nav-item" nav-item="5">
                        <a class="nav-link js-scroll-trigger" href="#services">Home Page</a>
                    </li>
                    <li class="nav-item" nav-item="4">
                        <a class="nav-link js-scroll-trigger" href="@Url.Action("About","Home")">About Us</a>
                    </li>
                    <li class="nav-item" nav-item="3">
                        <a class="nav-link js-scroll-trigger" href="#about">Solutions</a>
                    </li>
                    <li class="nav-item" nav-item="2">
                        <a class="nav-link js-scroll-trigger" href="#Job">Careers</a>
                    </li>

                    <li class="nav-item" nav-item="1">
                        <a class="nav-link js-scroll-trigger" href="#ContacUs">Contact Us</a>
                    </li>



                    @*<li class="nav-item" nav-item="6">
                        <form action="/Home/SetCulture" method="post" class=form-lang>
                            <div class="btn-group lan-btn-group" data-toggle="buttons">

                                <label class="btn btn-lang">
                                    <input class="culture" name="culture" id="en-us" value="en-us" type="radio" @selected("en-us", culture) /> En
                                </label>
                                <label class="btn btn-lang">
                                    <input class="culture" name="culture" id="he" value="he" type="radio" @selected("he", culture) /> עב
                                </label>
                            </div>
                        </form>

                    </li>*@

                </ul>
            </div>
        </div>
    </nav>
    <header>
        <div class="overlay"></div>
        <video playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop">
            <source src="~/Videos/1920x520.mp4" type="video/mp4">
        </video>
        <div class="container h-100">
            <div class="d-flex h-100 text-center align-items-center">
                <div class="w-100 text-white">

                    @if (@Model != null)
                    {
                        <h1 class="display-3">@Model.HeaderPage.Main</h1>
                        if (!string.IsNullOrEmpty(Model.HeaderPage.Content))
                         {
                             <p class="lead mb-0" style="white-space: pre-line">@Html.Raw(@Model.HeaderPage.Content)</p>
                         }

                    }
                    
                </div>
            </div>
        </div>
    </header>


    <div class="container-fluid body-content">
        <div class="fullscreen-bg">
            <video loop muted autoplay poster="" class="fullscreen-bg__video">
                <source src="~/Videos/3D_1920x1000.mp4" type="video/mp4" />

            </video>
        </div>
        @*<div class="square">
                <div id="animation_container">
                    <canvas id="canvas"></canvas>
                    <div id="dom_overlay_container">
                    </div>
                </div>


            </div>*@

        @RenderBody()

        <section class="page-section container footer_section" id="ContacUs">
            <div class="section-header">
                <p class="ourCustomer">Contact us</p>
                <a href="tel:09-8855824" class="location">
                    <p class="">
                        09-8855824
                        &nbsp; &nbsp;
                        <i class="fa fa-phone"></i>
                    </p>
                </a>
                
                <a href="mailto:info@gim.co.il" class="location">
                    <p class="">

                        Office@@Gim.co.il
                        &nbsp; &nbsp;
                        <i class="fa fa-envelope"></i>
                    </p>
                </a>

                <p class="location">
                    Giborei Israel 5, Poleg Center, Netanya
                    &nbsp; &nbsp;
                    <i class="fa fa-map-marker"></i>
                </p>


            </div>

            <form class=" container-fluid footer-form" dir="rtl">
                <div class="form-row align-items-center">
                    <div class="col-auto">
                        <div class="input-group mb-2">
                            <input type="text" class="form-control" id="FullName" placeholder="Full name">
                        </div>
                    </div>
                    <div class="col-auto">
                        <div class="input-group mb-2">
                            <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Email">
                        </div>
                    </div>
                    <div class="col-auto">
                        <div class="input-group mb-2">
                            <input type="tel" class="form-control" id="phoneNumber" placeholder="Phone">
                        </div>
                    </div>
                    <div class="col-sm-12 col-lg-3">
                        <button type="submit" class="btn btn-primary ">GO</button>
                    </div>
                </div>
            </form>

        </section>
        <div class="footer-strip">


            <div class="col-md-7">
                <p dir="rtl">
                    All rights reserved to- 
                    <span dir="ltr">GO 2019</span>
                </p>
            </div>
        </div>
    </div>

    @*@using (Html.BeginForm("SetCulture", "Home"))
        {
            <fieldset>
                <legend>@Resources.ChooseYourLanguage</legend>

                <div class="control-group">
                    <div class="controls">
                        <label for="en-us">
                            <input name="culture" id="en-us" value="en-us" type="radio" @selected("en-us", culture) /> English
                        </label>
                    </div>
                </div>

                <div class="control-group">
                    <div class="controls">
                        <label for="es">
                            <input name="culture" id="es" value="es" type="radio" @selected("es", culture) /> Español
                        </label>
                    </div>
                </div>

                <div class="control-group">
                    <div class="controls">
                        <label for="ar">
                            <input name="culture" id="he" value="he" type="radio" @selected("he", culture) /> עברית
                        </label>
                    </div>
                </div>


            </fieldset>




        }*@

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    <script src="~/plugin/owlcarousel/owl.carousel.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.11/jquery.mousewheel.min.js"></script>
    <script src="~/Scripts/jquery.easing.min.js"></script>
    <script src="~/Scripts/swiper.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.7/vue.js'></script>
    <script src="~/Scripts/vue-carousel-3d.js"></script>
    @*<script src='https://rawgit.com/Wlada/vue-carousel-3d/master/dist/vue-carousel-3d.min.js'></script>*@
    <script src="~/Scripts/Custom.js"></script>
    <script src="~/Scripts/bootstrap-tabcollapse.js"></script>

    <script>



        function sortMeBy(arg, sel, elem, order) {
            var $selector = $(sel),
                $element = $selector.children(elem);
            $element.sort(function (a, b) {
                var an = parseInt(a.getAttribute(arg)),
                    bn = parseInt(b.getAttribute(arg));
                if (order == "asc") {
                    if (an > bn)
                        return 1;
                    if (an < bn)
                        return -1;
                } else if (order == "desc") {
                    if (an < bn)
                        return 1;
                    if (an > bn)
                        return -1;
                }
                return 0;
            });
            $element.detach().appendTo($selector);
        }
        (function ($) {
            "use strict"; // Start of use strict

            // Smooth scrolling using jQuery easing
            $('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function () {
                if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
                    var target = $(this.hash);
                    target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                    if (target.length) {
                        $('html, body').animate({
                            scrollTop: (target.offset().top - 54)
                        }, 1000, "easeInOutExpo");
                        return false;
                    }
                }
            });

            // Closes responsive menu when a scroll trigger link is clicked
            $('.js-scroll-trigger').click(function () {
                $('.navbar-collapse').collapse('hide');
            });

            // Activate scrollspy to add active class to navbar items on scroll
            $('body').scrollspy({
                target: '#mainNav',
                offset: 56
            });

            // Collapse Navbar
            var navbarCollapse = function () {
                if ($("#mainNav").offset().top > 100) {
                    $("#mainNav").addClass("navbar-shrink");
                } else {
                    $("#mainNav").removeClass("navbar-shrink");
                }
            };
            // Collapse now if page is not at top
            navbarCollapse();
            // Collapse the navbar when page is scrolled
            $(window).scroll(navbarCollapse);

        })(jQuery); // End of use strict

        var canvas, stage, exportRoot, anim_container, dom_overlay_container, fnStartAnimation;

        function init() {
            canvas = document.getElementById("canvas");
            anim_container = document.getElementById("animation_container");
            dom_overlay_container = document.getElementById("dom_overlay_container");
            var comp = AdobeAn.getComposition("B2D64D364C6BDA4EB837BE0397C8C465");
            var lib = comp.getLibrary();
            handleComplete({}, comp);
        }

        function handleComplete(evt, comp) {
            //This function is always called, irrespective of the content. You can use the variable "stage" after it is created in token create_stage.
            var lib = comp.getLibrary();
            var ss = comp.getSpriteSheet();
            exportRoot = new lib.logo3_HTML5Canvas();
            stage = new lib.Stage(canvas);
            //Registers the "tick" event listener.
            fnStartAnimation = function () {
                stage.addChild(exportRoot);
                createjs.Ticker.setFPS(lib.properties.fps);
                createjs.Ticker.addEventListener("tick", stage)
                stage.addEventListener("tick", handleTick)

                function getProjectionMatrix(container, totalDepth) {
                    var focalLength = 528.25;
                    var projectionCenter = { x: lib.properties.width / 2, y: lib.properties.height / 2 };
                    var scale = (totalDepth + focalLength) / focalLength;
                    var scaleMat = new createjs.Matrix2D;
                    scaleMat.a = 1 / scale;
                    scaleMat.d = 1 / scale;
                    var projMat = new createjs.Matrix2D;
                    projMat.tx = -projectionCenter.x;
                    projMat.ty = -projectionCenter.y;
                    projMat = projMat.prependMatrix(scaleMat);
                    projMat.tx += projectionCenter.x;
                    projMat.ty += projectionCenter.y;
                    return projMat;
                }

                function handleTick(event) {
                    var cameraInstance = exportRoot.___camera___instance;
                    if (cameraInstance !== undefined && cameraInstance.pinToObject !== undefined) {
                        cameraInstance.x = cameraInstance.pinToObject.x + cameraInstance.pinToObject.pinOffsetX;
                        cameraInstance.y = cameraInstance.pinToObject.y + cameraInstance.pinToObject.pinOffsetY;
                        if (cameraInstance.pinToObject.parent !== undefined &&
                            cameraInstance.pinToObject.parent.depth !== undefined)
                            cameraInstance.depth = cameraInstance.pinToObject.parent.depth +
                                cameraInstance.pinToObject.pinOffsetZ;
                    }
                    applyLayerZDepth(exportRoot);
                }

                function applyLayerZDepth(parent) {
                    var cameraInstance = parent.___camera___instance;
                    var focalLength = 528.25;
                    var projectionCenter = { 'x': 0, 'y': 0 };
                    if (parent === exportRoot) {
                        var stageCenter = { 'x': lib.properties.width / 2, 'y': lib.properties.height / 2 };
                        projectionCenter.x = stageCenter.x;
                        projectionCenter.y = stageCenter.y;
                    }
                    for (child in parent.children) {
                        var layerObj = parent.children[child];
                        if (layerObj == cameraInstance)
                            continue;
                        applyLayerZDepth(layerObj, cameraInstance);
                        if (layerObj.layerDepth === undefined)
                            continue;
                        if (layerObj.currentFrame != layerObj.parent.currentFrame) {
                            layerObj.gotoAndPlay(layerObj.parent.currentFrame);
                        }
                        var matToApply = new createjs.Matrix2D;
                        var cameraMat = new createjs.Matrix2D;
                        var totalDepth = layerObj.layerDepth ? layerObj.layerDepth : 0;
                        var cameraDepth = 0;
                        if (cameraInstance && !layerObj.isAttachedToCamera) {
                            var mat = cameraInstance.getMatrix();
                            mat.tx -= projectionCenter.x;
                            mat.ty -= projectionCenter.y;
                            cameraMat = mat.invert();
                            cameraMat.prependTransform(projectionCenter.x, projectionCenter.y, 1, 1, 0, 0, 0, 0, 0);
                            cameraMat.appendTransform(-projectionCenter.x, -projectionCenter.y, 1, 1, 0, 0, 0, 0, 0);
                            if (cameraInstance.depth)
                                cameraDepth = cameraInstance.depth;
                        }
                        if (layerObj.depth) {
                            totalDepth = layerObj.depth;
                        }
                        //Offset by camera depth
                        totalDepth -= cameraDepth;
                        if (totalDepth < -focalLength) {
                            matToApply.a = 0;
                            matToApply.d = 0;
                        } else {
                            if (layerObj.layerDepth) {
                                var sizeLockedMat = getProjectionMatrix(parent, layerObj.layerDepth);
                                if (sizeLockedMat) {
                                    sizeLockedMat.invert();
                                    matToApply.prependMatrix(sizeLockedMat);
                                }
                            }
                            matToApply.prependMatrix(cameraMat);
                            var projMat = getProjectionMatrix(parent, totalDepth);
                            if (projMat) {
                                matToApply.prependMatrix(projMat);
                            }
                        }
                        layerObj.transformMatrix = matToApply;
                    }
                }
            }

            //Code to support hidpi screens and responsive scaling.
            function makeResponsive(isResp, respDim, isScale, scaleType) {
                var lastW, lastH, lastS = 1;
                window.addEventListener('resize', resizeCanvas);
                resizeCanvas();

                function resizeCanvas() {

                    var w = lib.properties.width, h = lib.properties.height;
                    var iw;
                    if (window.innerWidth < 500) {
                        iw = window.innerWidth / 2.5, ih = window.innerHeight;

                    } else {
                        iw = window.innerWidth / 6, ih = window.innerHeight;
                    }

                    console.log();

                    var pRatio = window.devicePixelRatio || 1, xRatio = iw / w, yRatio = ih / h, sRatio = 1;
                    if (isResp) {
                        if ((respDim == 'width' && lastW == iw) || (respDim == 'height' && lastH == ih)) {
                            sRatio = lastS;
                            console.log(w);
                        } else if (!isScale) {
                            if (iw < w || ih < h)
                                sRatio = Math.min(xRatio, yRatio);
                        } else if (scaleType == 1) {
                            sRatio = Math.min(xRatio, yRatio);
                        } else if (scaleType == 2) {
                            sRatio = Math.max(xRatio, yRatio);
                        }
                    }
                    canvas.width = w * pRatio * sRatio;
                    canvas.height = h * pRatio * sRatio;
                    canvas.style.width = dom_overlay_container.style.width = anim_container.style.width = w * sRatio + 'px';
                    canvas.style.height = anim_container.style.height = dom_overlay_container.style.height =
                        h * sRatio + 'px';
                    stage.scaleX = pRatio * sRatio;
                    stage.scaleY = pRatio * sRatio;
                    lastW = iw;
                    lastH = ih;
                    lastS = sRatio;
                    stage.tickOnUpdate = false;
                    stage.update();
                    stage.tickOnUpdate = true;
                }
            }

            makeResponsive(true, 'both', false, 10);
            AdobeAn.compositionLoaded(lib.properties.id);
            fnStartAnimation();
        }
    </script>
    <script type="text/javascript">

        (function ($) {
            $("input[type = 'radio']").click(function () {
                $(this).parents("form").submit(); // post form
            });

        })(jQuery);
        (function ($) {
            //name = "culture"
            //$("")


        })(jQuery);
    </script>
    <script type="text/javascript">
        $(document).ready(function () {

            //$(".navbar-nav").html(

            //    $(".navbar-nav").children("li").sort(function (a, b) {

            //        return $(a).text().toUpperCase().localeCompare(

            //            $(b).text().toUpperCase());

            //    }) // End Sort

            //); // End HTML
            //var deferred = sortMeBy("nav-item", "ul.navbar-nav", "li", "asc");
            $('label').click(function () {
                var xx = $(this)[0].childNodes;
                console.log();
                $.post("\Home//SetCulture", { culture: xx[1].defaultValue })
            });

        });
    </script>
    @RenderSection("scripts", required: false)
</body>
</html>
